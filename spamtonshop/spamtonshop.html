<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[[Hyperlink Blocked]]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* This loads the custom Determination Mono font */
        @font-face {
            font-family: 'Determination Mono Web';
            src: url('https://raw.githubusercontent.com/so-hard-to-think-of-a-name/determination-mono-web-font/master/fonts/DeterminationMonoWeb.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'VT323', monospace;
            margin: 0;
            background-color: black;
            overflow: hidden;
        }

        #layout-container {
            transform-origin: top center;
            width: 100%;
        }

        .full-width-img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        /* This container holds the textbox and the dialogue text on top of it */
        .textbox-wrapper {
            position: relative;
        }

        /* This is where the dialogue text will be displayed */
        #dialogue {
            font-family: 'Determination Mono Web', 'VT323', monospace;
            color: white;
            font-size: 32px; /* Adjust size as needed */
            text-shadow: 2px 2px #000;
            position: absolute;
            
            /* --- FIXED POSITIONING --- */
            /* Removed the centering logic */
            /* Position the text from the top-left corner */
            top: 25px;
            left: 45px;
            /* Set the width and height to prevent overflow */
            width: calc(100% - 90px);
            height: calc(100% - 50px);
            
            /* Allows for proper word wrapping */
            white-space: pre-wrap;
            word-wrap: break-word;
        }

    </style>
</head>
<body>
    
    <!-- Main container for the images that our script will control -->
    <div id="layout-container">
        <img src="shop.png" alt="Spamton's Shop" class="full-width-img">
        <div class="textbox-wrapper">
            <img src="textbox.png" alt="Dialogue Box" class="full-width-img">
            <p id="dialogue"></p>
        </div>
    </div>

    <!-- Hidden audio player -->
    <audio id="background-audio" loop style="display:none;">
        <source src="Dialtone.flac" type="audio/flac">
        Your browser does not support the audio element.
    </audio>

    <script>
        const layoutContainer = document.getElementById('layout-container');
        const dialogueElement = document.getElementById('dialogue');
        const backgroundAudio = document.getElementById('background-audio');

        // An array of Spamton's iconic lines
        const sentences = [
            "HEY EVERY         !",
            "IT'S ME!!",
            "EV3RY BUDDY 'S FAVORITE [[Number 1 Rated Salesman1997]]",
            "SPAMTON G. SPAMTON!!",
            "WOAH!! IF IT ISN'T A... LIGHT nER!",
            "ARE YOU LOOKING FOR THE [Sweet], [Sweet] TASTE OF [Freedom]?",
            "WELL YOU'VE COME TO THE RIGHT [[Shop]]!!",
            "I'VE GOT THE DEALS THAT'LL MAKE YOU [[Die]]!!"
        ];

        let sentenceIndex = 0;
        let charIndex = 0;

        // Function to type out a sentence character by character
        function typeSentence() {
            if (charIndex < sentences[sentenceIndex].length) {
                // Set the text content with the asterisk
                dialogueElement.textContent = '* ' + sentences[sentenceIndex].substring(0, charIndex + 1);
                charIndex++;
                setTimeout(typeSentence, 60); // Adjust typing speed here (milliseconds)
            } else {
                // Wait for a bit before clearing and starting the next sentence
                setTimeout(() => {
                    charIndex = 0;
                    sentenceIndex = (sentenceIndex + 1) % sentences.length; // Loop back to the start
                    dialogueElement.textContent = '* ';
                    typeSentence();
                }, 2500); // Delay between sentences
            }
        }

        // This function will run when the page content is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Attempt to play the audio. The .catch() prevents an error in the console if it's blocked.
            backgroundAudio.play().catch(error => {
                console.log("Audio autoplay was blocked by the browser. This is expected.");
            });
            // Start the typing effect
            typeSentence();
        });

        function fitLayoutToScreen() {
            layoutContainer.style.transform = 'scale(1)';
            const contentHeight = layoutContainer.scrollHeight;
            const windowHeight = window.innerHeight;
            if (contentHeight > windowHeight) {
                const scaleFactor = windowHeight / contentHeight;
                layoutContainer.style.transform = `scale(${scaleFactor})`;
            }
        }
        window.addEventListener('load', fitLayoutToScreen);
        window.addEventListener('resize', fitLayoutToScreen);
    </script>

</body>
</html>
